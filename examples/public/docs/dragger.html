<!DOCTYPE html>  <html> <head>   <title>dragger.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="area_renderer.html">                 area_renderer.coffee               </a>                                           <a class="source" href="axis_time.html">                 axis_time.coffee               </a>                                           <a class="source" href="axis_y.html">                 axis_y.coffee               </a>                                           <a class="source" href="column_renderer.html">                 column_renderer.coffee               </a>                                           <a class="source" href="donut_renderer.html">                 donut_renderer.coffee               </a>                                           <a class="source" href="dragger.html">                 dragger.coffee               </a>                                           <a class="source" href="fixtures_time.html">                 fixtures_time.coffee               </a>                                           <a class="source" href="gauge_renderer.html">                 gauge_renderer.coffee               </a>                                           <a class="source" href="line_renderer.html">                 line_renderer.coffee               </a>                                           <a class="source" href="range_slider.html">                 range_slider.coffee               </a>                                           <a class="source" href="scatter_renderer.html">                 scatter_renderer.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               dragger.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Tactile.Dragger = </span><span class="k">class</span> <span class="nx">Dragger</span>

  <span class="nv">constructor: </span><span class="nf">(args) -&gt;</span>
    <span class="vi">@renderer = </span><span class="nx">args</span><span class="p">.</span><span class="nx">renderer</span>
    <span class="vi">@graph = </span><span class="nx">@renderer</span><span class="p">.</span><span class="nx">graph</span>
    <span class="vi">@series = </span><span class="nx">@renderer</span><span class="p">.</span><span class="nx">series</span>
    <span class="vi">@drawCircles = </span><span class="nx">args</span><span class="p">.</span><span class="nx">circles</span> <span class="o">or</span> <span class="kc">false</span>

    <span class="vi">@afterDrag = </span><span class="nx">@series</span><span class="p">.</span><span class="nx">afterDrag</span> <span class="o">||</span> <span class="o">-&gt;</span>
    <span class="vi">@onDrag = </span><span class="nx">@series</span><span class="p">.</span><span class="nx">onDrag</span> <span class="o">||</span> <span class="o">-&gt;</span>
    <span class="vi">@dragged = </span><span class="kc">null</span>
    <span class="nx">@_bindMouseEvents</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>@power = Math.pow(10, (@series.sigfigs or 1))</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@power = </span><span class="k">if</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">sigfigs</span><span class="o">?</span> <span class="k">then</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">sigfigs</span><span class="p">)</span> <span class="k">else</span> <span class="mi">1</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@power</span>
    <span class="vi">@setSpeed = </span><span class="nx">@renderer</span><span class="p">.</span><span class="nx">transitionSpeed</span>
    <span class="vi">@timesRendered = </span><span class="mi">0</span>

  <span class="nv">_bindMouseEvents: </span><span class="o">-&gt;</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">@graph</span><span class="p">.</span><span class="nx">_element</span><span class="p">)</span>
      <span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;mousemove.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_mouseMove</span><span class="p">)</span>
      <span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;touchmove.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_mouseMove</span><span class="p">)</span>
      <span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;mouseup.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_mouseUp</span><span class="p">)</span>
      <span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;touchend.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_mouseUp</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>bind dragging events to the passed nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">makeHandlers: </span><span class="nf">(nodes) -&gt;</span>
    <span class="nv">nodes = </span><span class="nx">@_appendCircles</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@drawCircles</span>

    <span class="nx">nodes</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;mousedown.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_datapointDrag</span><span class="p">)</span>
      <span class="p">.</span><span class="kc">on</span><span class="p">(</span><span class="s2">&quot;touchstart.drag.#{@series.name}&quot;</span><span class="p">,</span> <span class="nx">@_datapointDrag</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>update value of a draggable node
so it's y-value will reflect currently dragged position</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">updateDraggedNode: </span><span class="nf">() -&gt;</span>
    <span class="k">if</span> <span class="nx">@dragged</span><span class="o">?</span><span class="p">.</span><span class="nx">y</span><span class="o">?</span>
      <span class="nx">@renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;.draggable-node&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">i</span> <span class="o">is</span> <span class="nx">@dragged</span><span class="p">.</span><span class="nx">i</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nv">d.y = </span><span class="nx">@dragged</span><span class="p">.</span><span class="nx">y</span>
          <span class="nv">d.dragged = </span><span class="kc">true</span>

  <span class="nv">_datapointDrag: </span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>fix for a weird behavior that d is sometimes
an array with all the nodes of the series</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">d = </span><span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="k">then</span> <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">else</span> <span class="nx">d</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>lock the tooltip on the dragged element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Tactile</span><span class="p">.</span><span class="nx">Tooltip</span><span class="p">.</span><span class="nx">spotlightOn</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">tooltip</span>
    <span class="vi">@dragged = </span><span class="p">{</span><span class="nv">d: </span><span class="nx">d</span><span class="p">,</span> <span class="nv">i: </span><span class="nx">i</span><span class="p">}</span>
    <span class="nx">@update</span><span class="p">()</span>

  <span class="nv">_mouseMove: </span><span class="o">=&gt;</span>
    <span class="nv">p = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">@graph</span><span class="p">.</span><span class="nx">vis</span><span class="p">.</span><span class="nx">node</span><span class="p">())</span>
    <span class="nv">t = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span>

    <span class="k">if</span> <span class="nx">@dragged</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>TODO: !! move this to tooltip
TODO: !! update tooltip text continuously on dragging</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">tooltip</span>
        <span class="nv">elementRelativeposition = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">@graph</span><span class="p">.</span><span class="nx">_element</span><span class="p">)</span>
        <span class="nv">tip = </span><span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">@graph</span><span class="p">.</span><span class="nx">_element</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;.tooltip&#39;</span><span class="p">)</span>
        <span class="nv">offsetTop = </span><span class="nx">@graph</span><span class="p">.</span><span class="nx">padding</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">@graph</span><span class="p">.</span><span class="nx">margin</span><span class="p">.</span><span class="nx">top</span>
        <span class="nx">tip</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;#{@graph.y(@dragged.y) + offsetTop}px&quot;</span><span class="p">)</span>

      <span class="vi">@renderer.transitionSpeed = </span><span class="mi">0</span>
      <span class="nv">inverted = </span><span class="nx">@graph</span><span class="p">.</span><span class="nx">y</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">@graph</span><span class="p">.</span><span class="nx">height</span><span class="p">(),</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
      <span class="nv">value = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">inverted</span> <span class="o">*</span> <span class="nx">@power</span><span class="p">)</span> <span class="o">/</span> <span class="nx">@power</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">inverted</span><span class="p">,</span> <span class="nx">value</span>
      <span class="vi">@dragged.y = </span><span class="nx">value</span>
      <span class="nx">@onDrag</span><span class="p">(</span><span class="nx">@dragged</span><span class="p">,</span> <span class="nx">@series</span><span class="p">,</span> <span class="nx">@graph</span><span class="p">)</span>
      <span class="nx">@update</span><span class="p">()</span>

  <span class="nv">_mouseUp: </span><span class="o">=&gt;</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@dragged</span><span class="o">?</span><span class="p">.</span><span class="nx">y</span><span class="o">?</span>
    <span class="nx">@afterDrag</span><span class="p">(</span><span class="nx">@dragged</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">@dragged</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">@dragged</span><span class="p">.</span><span class="nx">i</span><span class="p">,</span> <span class="nx">@series</span><span class="p">,</span> <span class="nx">@graph</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@dragged</span>

    <span class="nx">@renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;circle.draggable-node&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">@series</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nv">d.dragged = </span><span class="kc">false</span>
          <span class="s2">&quot;draggable-node&quot;</span><span class="p">)</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">style</span> <span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span>
    <span class="vi">@dragged = </span><span class="kc">null</span>
    </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>unlock the tooltip from the dragged element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Tactile</span><span class="p">.</span><span class="nx">Tooltip</span><span class="p">.</span><span class="nx">turnOffspotlight</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">tooltip</span>

    <span class="vi">@renderer.transitionSpeed = </span><span class="nx">@setSpeed</span>
    <span class="nx">@update</span><span class="p">()</span>

  <span class="nv">update: </span><span class="o">=&gt;</span>
    <span class="nx">@renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span>


  <span class="nv">_appendCircles: </span><span class="nf">(nodes) -&gt;</span>
    <span class="nv">renderer = </span><span class="nx">@renderer</span>

    <span class="nv">circs = </span><span class="nx">@renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;circle.draggable-node&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">@series</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>append the circles but make them invisible</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">circs</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg:circle&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span>

    <span class="nx">circs</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;clip-path&quot;</span><span class="p">,</span> <span class="s2">&quot;url(#scatter-clip)&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="p">[</span><span class="s2">&quot;draggable-node&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;active&quot;</span> <span class="k">if</span> <span class="nx">d</span><span class="p">.</span><span class="nx">dragged</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="k">if</span> <span class="nx">d</span><span class="p">.</span><span class="nx">dragged</span> <span class="k">then</span> <span class="s1">&#39;white&#39;</span> <span class="k">else</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">color</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="k">if</span> <span class="nx">d</span><span class="p">.</span><span class="nx">dragged</span> <span class="k">then</span> <span class="nx">@series</span><span class="p">.</span><span class="nx">color</span> <span class="k">else</span> <span class="s1">&#39;white&#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nf">(d, i) -&gt;</span> <span class="s2">&quot;draggable-node-#{i}-#{d.x}&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="s2">&quot;ns-resize&quot;</span><span class="p">)</span>

    <span class="nx">circs</span>
      <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="k">if</span> <span class="nx">@timesRendered</span><span class="o">++</span> <span class="o">is</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="nx">@renderer</span><span class="p">.</span><span class="nx">transitionSpeed</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">@graph</span><span class="p">.</span><span class="nx">x</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">@graph</span><span class="p">.</span><span class="nx">y</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>show and hide the circle for the currently hovered element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">nodes</span><span class="p">.</span><span class="kc">on</span> <span class="s1">&#39;mouseover.show-dragging-circle&#39;</span><span class="p">,</span> <span class="nf">(d, i, el) -&gt;</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;.draggable-node&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span>
      <span class="nv">circ = </span><span class="nx">renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;#draggable-node-#{i}-#{d.x}&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>TODO: circle should be placed at the middle of a column
hoveredNode = d3.select(@).node().getBBox()
circ.attr('cx', hoveredNode.x + hoveredNode.width / 2)</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">circ</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="nx">circs</span><span class="p">.</span><span class="nx">tooltip</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nv">graph: </span><span class="nx">@graph</span>
      <span class="nv">text: </span><span class="nx">@series</span><span class="p">.</span><span class="nx">tooltip</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span>
      <span class="nv">circleOnHover: </span><span class="kc">true</span>
      <span class="nv">gravity: </span><span class="s2">&quot;right&quot;</span>

    <span class="nx">renderer</span><span class="p">.</span><span class="nx">seriesCanvas</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">&#39;.draggable-node&#39;</span><span class="p">)</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 